
## 實現WebRTC的步驟

1. Signalling

開啟直播的Peer需要提供一個offer，裡面包含SDP(session description protocol)，會寫在signal server，才能讓另一位的peer回應這個SDP。

需要交換的資訊：
- IP Address
- audio + video tracks
- data channels that determine the media type with a resolution exchange

2. Connecting

Peer彼此之間需要產生一個list的ICE(IP/port pair)，才能讓WebRTC透過STUN Server連接。
每個Peer一樣要將他們的ICE寫入firestore，才能讓其他peer讀到。

- ICE: Interactive connectivity establishment (uses STUN/TURN servers)
  - **STUN** Standard Traversal Utilities for NAT
    - 幫忙取得網路IP -> 透過發送Stun server請求
  - **TURN** Traversal Using Relays around NAT
    - 幫忙處理裝置之間因為防火牆而中斷連線的server
    - These servers are used to work up with the privacy of the agents by not letting the servers locate the IP of the communicators. TURN creates a temporary IP for the agents to generate traffic to and fro, acting as a proxy.

3. Securing

- DTLS(Datagram Transport Layer Security)
  - allows webRTC to establish a secured and encrypted communication between two peers. The client and the server to communicate, need a agree on certain values known as ciphers in a DTLS handshake. To secure the data streams of the peers, DTLS is required
- SRTP(Secure Real-time Transport Protocol)
  - It secures and encrypts the media streams between two connecting peers. It is initialized by using keys generated by DTLS. This protocol is specifically designed for encrypting RTP packets.