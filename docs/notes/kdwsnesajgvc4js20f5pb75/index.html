<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/programming_notes/favicon.ico"/><title>Concurrency</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="Concurrency"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://qazwsx521943.github.io/programming_notes/notes/kdwsnesajgvc4js20f5pb75/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2024/1/5"/><meta property="article:modified_time" content="2024/1/5"/><link rel="canonical" href="https://qazwsx521943.github.io/programming_notes/notes/kdwsnesajgvc4js20f5pb75/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/programming_notes/_next/static/css/b0cd2e9ac14c3b4a.css" as="style"/><link rel="stylesheet" href="/programming_notes/_next/static/css/b0cd2e9ac14c3b4a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/programming_notes/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/programming_notes/_next/static/chunks/webpack-228838cbd1a05a99.js" defer=""></script><script src="/programming_notes/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/programming_notes/_next/static/chunks/main-ae055e704e2f54e8.js" defer=""></script><script src="/programming_notes/_next/static/chunks/pages/_app-c5ac04a5d7ae899a.js" defer=""></script><script src="/programming_notes/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/programming_notes/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/programming_notes/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/programming_notes/_next/static/9pheV2wsTAqDZC2CX9fjQ/_buildManifest.js" defer=""></script><script src="/programming_notes/_next/static/9pheV2wsTAqDZC2CX9fjQ/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="concurrency">Concurrency<a aria-hidden="true" class="anchor-heading icon-link" href="#concurrency"></a></h1>
<h2 id="what-is-concurrency">What is concurrency?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-concurrency"></a></h2>
<p>在一定的時間內，有多個任務(Task)需要同時進行。</p>
<p>在ios開發中，我們可能同一個時段會需要處理不同的任務，那我們就會透過多線程的方式，讓每個線程去處理不同的任務。</p>
<p>比方說，跟 UI 有關的任務包含，建立 / 更新視圖，就一定要在主線程上執行。</p>
<p>而如果要等待資料回傳的任務（發送網路請求、下載文件等等），我們就會讓他在其他線程上去執行。</p>
<p>如果今天我們把需要花時間的任務請主線程處理的話，主線程會乾等在那導致UI無法進行任何處理，使用者就會覺得我們的應用程式壞掉。</p>
<h2 id="高併發跟多線程的關係">高併發跟多線程的關係？<a aria-hidden="true" class="anchor-heading icon-link" href="#高併發跟多線程的關係"></a></h2>
<h2 id="ios中有什麼處理多線程的技術">iOS中有什麼處理多線程的技術？<a aria-hidden="true" class="anchor-heading icon-link" href="#ios中有什麼處理多線程的技術"></a></h2>
<ol>
<li>
<p>NSThread</p>
<blockquote>
<p>屬於Objective-C中的一個類，可以用來建立 / 管理 線程</p>
</blockquote>
</li>
<li>
<p><a href="/programming_notes/notes/m2klofp5yj7niqiawmu25a0">GCD</a></p>
<blockquote>
<p>Apple 開發的框架，讓我們可以有效針對不同裝置的硬體配備進行多線程的處理。</p>
</blockquote>
<ul>
<li>解決了 NSThread 什麼問題？
<ul>
<li>簡單易用</li>
<li>高效：可以更有效利用設備的多核心處理能力</li>
<li>安全可靠</li>
</ul>
</li>
</ul>
</li>
<li>
<p>async / await (swift 5.5)</p>
<blockquote>
</blockquote>
</li>
</ol>
<h2 id="衡量標準">衡量標準<a aria-hidden="true" class="anchor-heading icon-link" href="#衡量標準"></a></h2>
<ol>
<li>QPS(Query per second)</li>
<li>RT (Response Time)</li>
</ol>
<h2 id="通常在解決高併發有兩種擴展方式">通常在解決高併發有兩種擴展方式<a aria-hidden="true" class="anchor-heading icon-link" href="#通常在解決高併發有兩種擴展方式"></a></h2>
<ol>
<li>垂直擴展 -> 升級硬體
<ol>
<li>提高硬體核心數</li>
</ol>
</li>
<li>水平擴展
<ol>
<li>負載均衡 ex: F5 + nginx 去做 load balance</li>
<li>分散式緩存： redis, memcached. 搭配CDN</li>
</ol>
</li>
</ol></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-concurrency" title="What is concurrency?">What is concurrency?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#高併發跟多線程的關係" title="高併發跟多線程的關係？">高併發跟多線程的關係？</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#ios中有什麼處理多線程的技術" title="iOS中有什麼處理多線程的技術？">iOS中有什麼處理多線程的技術？</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#衡量標準" title="衡量標準">衡量標準</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#通常在解決高併發有兩種擴展方式" title="通常在解決高併發有兩種擴展方式">通常在解決高併發有兩種擴展方式</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"kdwsnesajgvc4js20f5pb75","title":"Concurrency","desc":"","updated":1704447724983,"created":1704421852609,"custom":{},"fname":"programming.concurrency","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"496261d78dd24b7d15778073026e6958","links":[{"type":"wiki","from":{"fname":"programming.concurrency","id":"kdwsnesajgvc4js20f5pb75","vaultName":"Dendron"},"value":"programming.language.swift.framework.grand-central-dispatch","alias":"GCD","position":{"start":{"line":20,"column":4,"offset":355},"end":{"line":20,"column":71,"offset":422},"indent":[]},"xvault":false,"sameFile":false,"to":{"fname":"programming.language.swift.framework.grand-central-dispatch"}}],"anchors":{"what-is-concurrency":{"type":"header","text":"What is concurrency?","value":"what-is-concurrency","line":8,"column":0,"depth":2},"高併發跟多線程的關係":{"type":"header","text":"高併發跟多線程的關係？","value":"高併發跟多線程的關係","line":20,"column":0,"depth":2},"ios中有什麼處理多線程的技術":{"type":"header","text":"iOS中有什麼處理多線程的技術？","value":"ios中有什麼處理多線程的技術","line":22,"column":0,"depth":2},"衡量標準":{"type":"header","text":"衡量標準","value":"衡量標準","line":37,"column":0,"depth":2},"通常在解決高併發有兩種擴展方式":{"type":"header","text":"通常在解決高併發有兩種擴展方式","value":"通常在解決高併發有兩種擴展方式","line":42,"column":0,"depth":2}},"children":[],"parent":"rn0e0y5coqo8iyqfxd7ocsk","data":{}},"body":"\u003ch1 id=\"concurrency\"\u003eConcurrency\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#concurrency\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"what-is-concurrency\"\u003eWhat is concurrency?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-concurrency\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cp\u003e在一定的時間內，有多個任務(Task)需要同時進行。\u003c/p\u003e\n\u003cp\u003e在ios開發中，我們可能同一個時段會需要處理不同的任務，那我們就會透過多線程的方式，讓每個線程去處理不同的任務。\u003c/p\u003e\n\u003cp\u003e比方說，跟 UI 有關的任務包含，建立 / 更新視圖，就一定要在主線程上執行。\u003c/p\u003e\n\u003cp\u003e而如果要等待資料回傳的任務（發送網路請求、下載文件等等），我們就會讓他在其他線程上去執行。\u003c/p\u003e\n\u003cp\u003e如果今天我們把需要花時間的任務請主線程處理的話，主線程會乾等在那導致UI無法進行任何處理，使用者就會覺得我們的應用程式壞掉。\u003c/p\u003e\n\u003ch2 id=\"高併發跟多線程的關係\"\u003e高併發跟多線程的關係？\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#高併發跟多線程的關係\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003ch2 id=\"ios中有什麼處理多線程的技術\"\u003eiOS中有什麼處理多線程的技術？\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#ios中有什麼處理多線程的技術\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003eNSThread\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003e屬於Objective-C中的一個類，可以用來建立 / 管理 線程\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ca href=\"/programming_notes/notes/m2klofp5yj7niqiawmu25a0\"\u003eGCD\u003c/a\u003e\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eApple 開發的框架，讓我們可以有效針對不同裝置的硬體配備進行多線程的處理。\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cul\u003e\n\u003cli\u003e解決了 NSThread 什麼問題？\n\u003cul\u003e\n\u003cli\u003e簡單易用\u003c/li\u003e\n\u003cli\u003e高效：可以更有效利用設備的多核心處理能力\u003c/li\u003e\n\u003cli\u003e安全可靠\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003easync / await (swift 5.5)\u003c/p\u003e\n\u003cblockquote\u003e\n\u003c/blockquote\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"衡量標準\"\u003e衡量標準\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#衡量標準\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003eQPS(Query per second)\u003c/li\u003e\n\u003cli\u003eRT (Response Time)\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch2 id=\"通常在解決高併發有兩種擴展方式\"\u003e通常在解決高併發有兩種擴展方式\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#通常在解決高併發有兩種擴展方式\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003col\u003e\n\u003cli\u003e垂直擴展 -\u003e 升級硬體\n\u003col\u003e\n\u003cli\u003e提高硬體核心數\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003cli\u003e水平擴展\n\u003col\u003e\n\u003cli\u003e負載均衡 ex: F5 + nginx 去做 load balance\u003c/li\u003e\n\u003cli\u003e分散式緩存： redis, memcached. 搭配CDN\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/li\u003e\n\u003c/ol\u003e","noteIndex":{"id":"root","title":"My Second Brain","desc":"","updated":1703774418339,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"ce2f2d82cf7fe71b3a5900a8f91fd111","links":[],"anchors":{"welcome-to-my-learning-repository-":{"type":"header","text":"Welcome to my learning repository! 📚","value":"welcome-to-my-learning-repository-","line":8,"column":0,"depth":2}},"children":["j416lb0sk2vag9yvgr9bxzb","ski4xep9sjz6v7rxjf1fln1","avquk6puzxi790rxzodnfmh","rn0e0y5coqo8iyqfxd7ocsk"],"parent":null,"data":{},"body":"\n## Welcome to my learning repository! 📚\n\n**Disclaimer:**\n\nThe content in this repository is a work in progress and should not be considered an authoritative source of information. These notes are currently being compiled during my learning journey at AppWorks School. They are subject to change, and there may be gaps in organization and accuracy.\n\n**Note Status:**\n\nI am actively working on organizing and rectifying any inaccuracies. Expect a more comprehensive set of notes by 2024/01/19.\n\n**Reading guide:**\n\n\u003e Block quotes like this generally means this paragraph is quoted by official documentation.\n\n```swift\n// Example code is typically simplified and may not be practical in real-world scenarios.\n// It is created solely to aid my understanding of the underlying concepts related to a specific topic.\n```\n\nFeel free to connect with me and share your thoughts or suggestions regarding my note-taking process. I appreciate any feedback and collaboration to enhance the quality of these notes.\n\nHappy learning! 🚀"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://qazwsx521943.github.io","assetsPrefix":"/programming_notes","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"kdwsnesajgvc4js20f5pb75"},"buildId":"9pheV2wsTAqDZC2CX9fjQ","assetPrefix":"/programming_notes","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>