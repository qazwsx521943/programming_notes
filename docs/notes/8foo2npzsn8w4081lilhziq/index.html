<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/programming_notes/favicon.ico"/><title>State</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Personal Knowledge Space"/><meta property="og:title" content="State"/><meta property="og:description" content="Personal Knowledge Space"/><meta property="og:url" content="https://qazwsx521943.github.io/programming_notes/notes/8foo2npzsn8w4081lilhziq/"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2023/12/24"/><meta property="article:modified_time" content="2023/12/24"/><link rel="canonical" href="https://qazwsx521943.github.io/programming_notes/notes/8foo2npzsn8w4081lilhziq/"/><meta name="next-head-count" content="14"/><link rel="preload" href="/programming_notes/_next/static/css/b0cd2e9ac14c3b4a.css" as="style"/><link rel="stylesheet" href="/programming_notes/_next/static/css/b0cd2e9ac14c3b4a.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/programming_notes/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/programming_notes/_next/static/chunks/webpack-228838cbd1a05a99.js" defer=""></script><script src="/programming_notes/_next/static/chunks/framework-28c999baf2863c3d.js" defer=""></script><script src="/programming_notes/_next/static/chunks/main-ae055e704e2f54e8.js" defer=""></script><script src="/programming_notes/_next/static/chunks/pages/_app-c5ac04a5d7ae899a.js" defer=""></script><script src="/programming_notes/_next/static/chunks/935-4dee79e80b8641c6.js" defer=""></script><script src="/programming_notes/_next/static/chunks/6-50972def09142ee2.js" defer=""></script><script src="/programming_notes/_next/static/chunks/pages/notes/%5Bid%5D-78d472fa3b924116.js" defer=""></script><script src="/programming_notes/_next/static/nSFlPafzYJhNeKeOHrNay/_buildManifest.js" defer=""></script><script src="/programming_notes/_next/static/nSFlPafzYJhNeKeOHrNay/_ssgManifest.js" defer=""></script></head><body><div id="__next" data-reactroot=""><section class="ant-layout" style="width:100%;min-height:100%"><header class="ant-layout-header" style="position:fixed;isolation:isolate;z-index:1;width:100%;border-bottom:1px solid #d4dadf;height:64px;padding:0 24px 0 2px"><div class="ant-row ant-row-center" style="max-width:992px;justify-content:space-between;margin:0 auto"><div style="display:flex" class="ant-col ant-col-xs-20 ant-col-sm-4"></div><div class="ant-col gutter-row ant-col-xs-0 ant-col-sm-20 ant-col-md-20 ant-col-lg-19"><div class="ant-select ant-select-lg ant-select-auto-complete ant-select-single ant-select-allow-clear ant-select-show-search" style="width:100%"><div class="ant-select-selector"><span class="ant-select-selection-search"><input type="search" autoComplete="off" class="ant-select-selection-search-input" role="combobox" aria-haspopup="listbox" aria-owns="undefined_list" aria-autocomplete="list" aria-controls="undefined_list" aria-activedescendant="undefined_list_0" value=""/></span><span class="ant-select-selection-placeholder">For full text search please use the &#x27;?&#x27; prefix. e.g. ? Onboarding</span></div></div></div><div style="display:none;align-items:center;justify-content:center" class="ant-col ant-col-xs-4 ant-col-sm-4 ant-col-md-0 ant-col-lg-0"><span role="img" aria-label="menu" style="font-size:24px" tabindex="-1" class="anticon anticon-menu"><svg viewBox="64 64 896 896" focusable="false" data-icon="menu" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M904 160H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0 624H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8zm0-312H120c-4.4 0-8 3.6-8 8v64c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-64c0-4.4-3.6-8-8-8z"></path></svg></span></div></div></header><section class="ant-layout" style="margin-top:64px;display:flex;flex-direction:row"><div class="site-layout-sidebar" style="flex:0 0 auto;width:calc(max((100% - 992px) / 2, 0px) + 200px);min-width:200px;padding-left:calc((100% - 992px) / 2)"><aside class="ant-layout-sider ant-layout-sider-dark" style="position:fixed;overflow:auto;height:calc(100vh - 64px);background-color:transparent;flex:0 0 200px;max-width:200px;min-width:200px;width:200px"><div class="ant-layout-sider-children"></div></aside></div><main class="ant-layout-content side-layout-main" style="max-width:1200px;min-width:0;display:block"><div style="padding:0 24px"><div class="main-content" role="main"><div class="ant-row"><div class="ant-col ant-col-24"><div class="ant-row" style="margin-left:-10px;margin-right:-10px"><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-24 ant-col-md-18"><div><h1 id="state">State<a aria-hidden="true" class="anchor-heading icon-link" href="#state"></a></h1>
<h2 id="what-is-state">What is <code>@State</code>?<a aria-hidden="true" class="anchor-heading icon-link" href="#what-is-state"></a></h2>
<blockquote>
<p>A property wrapper type that can read and write a value managed by SwiftUI.</p>
</blockquote>
<h2 id="when-to-use-it">When to use it?<a aria-hidden="true" class="anchor-heading icon-link" href="#when-to-use-it"></a></h2>
<blockquote>
<p>Use state as the single source of truth for a given value type that you store in a view hierarchy. Create a state value in an <code>App</code>, <code>Scene</code>, or <code>View</code> by applying the <code>@State</code> attribute to a property declaration and providing an initial value</p>
</blockquote>
<h2 id="behind-the-scene">Behind the scene<a aria-hidden="true" class="anchor-heading icon-link" href="#behind-the-scene"></a></h2>
<blockquote>
<p>SwiftUI manages the property's storage. When the value changes, SwiftUI updates the parts of the view hierarchy that depend on the value. To access a state's underlying value, you use its <code>wrappedValue</code> property. However, as a shortcut Swift enables you to access the wrapped value by referring directly to the state instance.</p>
</blockquote>
<p>SwiftUI 中每個View都是以struct定義的，由於struct中的property是immutable，如果我們有一個variable是會改變的，而每次改變時我們希望View會重繪，那這時候我們就可以用<code>@State</code>這個SwiftUI定義好的property wrapper。當我們更改這個以<code>@State</code>定義的variable，SwiftUI就會幫我們更新View。</p>
<p>在struct中宣告變數加上<code>@State</code>前綴，SwiftUI會將這個變數管理在一個shared storage(Redux like)，讓我們在View的重繪時不會遺失這個變數。</p>
<p>從SwiftUI documentation可以看到<code>@State</code>定義的一些public property：</p>
<pre class="language-swift"><code class="language-swift"><span class="token attribute atrule">@propertyWrapper</span> <span class="token keyword">public</span> <span class="token keyword">struct</span> <span class="token class-name">State</span><span class="token operator">&#x3C;</span><span class="token class-name">Value</span><span class="token operator">></span><span class="token punctuation">:</span> <span class="token class-name">DynamicProperty</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">init</span><span class="token punctuation">(</span>wrappedValue value<span class="token punctuation">:</span> <span class="token class-name">Value</span><span class="token punctuation">)</span>

    <span class="token keyword">public</span> <span class="token keyword">init</span><span class="token punctuation">(</span>initialValue value<span class="token punctuation">:</span> <span class="token class-name">Value</span><span class="token punctuation">)</span>

    <span class="token keyword">public</span> <span class="token keyword">var</span> wrappedValue<span class="token punctuation">:</span> <span class="token class-name">Value</span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token keyword">nonmutating</span> <span class="token keyword">set</span> <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">var</span> projectedValue<span class="token punctuation">:</span> <span class="token class-name">Binding</span><span class="token operator">&#x3C;</span><span class="token class-name">Value</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token keyword">get</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">protocol</span> <span class="token class-name">DynamicProperty</span> <span class="token punctuation">{</span>

    <span class="token comment">/// Updates the underlying value of the stored value.</span>
    <span class="token comment">///</span>
    <span class="token comment">/// SwiftUI calls this function before rendering a view's</span>
    <span class="token comment">/// ``View/body-swift.property`` to ensure the view has the most recent</span>
    <span class="token comment">/// value.</span>
    <span class="token keyword">mutating</span> <span class="token keyword">func</span> <span class="token function-definition function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div style="padding-left:10px;padding-right:10px" class="ant-col ant-col-xs-0 ant-col-md-6"><div><div class=""><div class="ant-anchor-wrapper dendron-toc" style="max-height:calc(100vh - 64px);z-index:1"><div class="ant-anchor"><div class="ant-anchor-ink"><span class="ant-anchor-ink-ball"></span></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#what-is-state" title="What is @State?">What is @State?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#when-to-use-it" title="When to use it?">When to use it?</a></div><div class="ant-anchor-link"><a class="ant-anchor-link-title" href="#behind-the-scene" title="Behind the scene">Behind the scene</a></div></div></div></div></div></div></div></div></div></div></div><div class="ant-divider ant-divider-horizontal" role="separator"></div><footer class="ant-layout-footer" style="padding:0 24px 24px"></footer></main></section></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"note":{"id":"8foo2npzsn8w4081lilhziq","title":"State","desc":"","updated":1703398059966,"created":1703397701306,"custom":{},"fname":"programming.language.swift.framework.SwiftUI.property wrappers.state","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"3806ab64f0ac4dd848f13936040a1f8f","links":[],"anchors":{"what-is-state":{"type":"header","text":"What is @State?","value":"what-is-state","line":8,"column":0,"depth":2},"when-to-use-it":{"type":"header","text":"When to use it?","value":"when-to-use-it","line":12,"column":0,"depth":2},"behind-the-scene":{"type":"header","text":"Behind the scene","value":"behind-the-scene","line":16,"column":0,"depth":2}},"children":[],"parent":"2v31mamk1fjl6km26amg70u","data":{}},"body":"\u003ch1 id=\"state\"\u003eState\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#state\"\u003e\u003c/a\u003e\u003c/h1\u003e\n\u003ch2 id=\"what-is-state\"\u003eWhat is \u003ccode\u003e@State\u003c/code\u003e?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#what-is-state\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eA property wrapper type that can read and write a value managed by SwiftUI.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"when-to-use-it\"\u003eWhen to use it?\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#when-to-use-it\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eUse state as the single source of truth for a given value type that you store in a view hierarchy. Create a state value in an \u003ccode\u003eApp\u003c/code\u003e, \u003ccode\u003eScene\u003c/code\u003e, or \u003ccode\u003eView\u003c/code\u003e by applying the \u003ccode\u003e@State\u003c/code\u003e attribute to a property declaration and providing an initial value\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003ch2 id=\"behind-the-scene\"\u003eBehind the scene\u003ca aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#behind-the-scene\"\u003e\u003c/a\u003e\u003c/h2\u003e\n\u003cblockquote\u003e\n\u003cp\u003eSwiftUI manages the property's storage. When the value changes, SwiftUI updates the parts of the view hierarchy that depend on the value. To access a state's underlying value, you use its \u003ccode\u003ewrappedValue\u003c/code\u003e property. However, as a shortcut Swift enables you to access the wrapped value by referring directly to the state instance.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003eSwiftUI 中每個View都是以struct定義的，由於struct中的property是immutable，如果我們有一個variable是會改變的，而每次改變時我們希望View會重繪，那這時候我們就可以用\u003ccode\u003e@State\u003c/code\u003e這個SwiftUI定義好的property wrapper。當我們更改這個以\u003ccode\u003e@State\u003c/code\u003e定義的variable，SwiftUI就會幫我們更新View。\u003c/p\u003e\n\u003cp\u003e在struct中宣告變數加上\u003ccode\u003e@State\u003c/code\u003e前綴，SwiftUI會將這個變數管理在一個shared storage(Redux like)，讓我們在View的重繪時不會遺失這個變數。\u003c/p\u003e\n\u003cp\u003e從SwiftUI documentation可以看到\u003ccode\u003e@State\u003c/code\u003e定義的一些public property：\u003c/p\u003e\n\u003cpre class=\"language-swift\"\u003e\u003ccode class=\"language-swift\"\u003e\u003cspan class=\"token attribute atrule\"\u003e@propertyWrapper\u003c/span\u003e \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eState\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eValue\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDynamicProperty\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003einit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ewrappedValue value\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eValue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003einit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003einitialValue value\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eValue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e wrappedValue\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eValue\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"token keyword\"\u003enonmutating\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eset\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003evar\u003c/span\u003e projectedValue\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eBinding\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eValue\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eget\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003epublic\u003c/span\u003e \u003cspan class=\"token keyword\"\u003eprotocol\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eDynamicProperty\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e/// Updates the underlying value of the stored value.\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e///\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// SwiftUI calls this function before rendering a view's\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// ``View/body-swift.property`` to ensure the view has the most recent\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e/// value.\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003emutating\u003c/span\u003e \u003cspan class=\"token keyword\"\u003efunc\u003c/span\u003e \u003cspan class=\"token function-definition function\"\u003eupdate\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e","noteIndex":{"id":"root","title":"root","desc":"","updated":1605266684036,"created":1595961348801,"custom":{"nav_order":0,"permalink":"/"},"fname":"root","type":"note","vault":{"fsPath":".","selfContained":true,"name":"Dendron"},"contentHash":"b49e7e13a0c91addc8ab9ef97080cf1e","links":[],"anchors":{},"children":["p1jj2aztluo4pb12qn8gunp","avquk6puzxi790rxzodnfmh","rn0e0y5coqo8iyqfxd7ocsk","c1bs7wsjfbhb0zipaywqv1"],"parent":null,"data":{},"body":"\nThis is the root for your Dendron vault.\n\nIf you decide to publish your entire vault, it will be your landing page. You are free to customize any part of this page except the frontmatter at the top, between the `---`.\n"},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":".","selfContained":true,"name":"Dendron"}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"asOwnDomain","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":false,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false,"enablePersistentHistory":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["root"],"writeStubs":false,"siteRootDir":"docs","seo":{"title":"Dendron","description":"Personal Knowledge Space"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"searchMode":"search","siteUrl":"https://qazwsx521943.github.io","assetsPrefix":"/programming_notes","siteFaviconPath":"favicon.ico","siteIndex":"root"}}},"__N_SSG":true},"page":"/notes/[id]","query":{"id":"8foo2npzsn8w4081lilhziq"},"buildId":"nSFlPafzYJhNeKeOHrNay","assetPrefix":"/programming_notes","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>